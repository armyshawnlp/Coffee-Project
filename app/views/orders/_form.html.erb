<%= form_with(model: order, local: true) do |form| %>
    <% if order.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(order.errors.count, "error") %> prohibited this order from being saved:</h2>

          <ul>
            <% order.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>


    <div class="field">
      <%= form.label :name %>
      <%= form.text_field :name, id: :order_name %>
    </div>

    <p>Choose the product for your order:</p>
    <%= form.fields_for :order_items do |form|%>
            <%= form.collection_select :product_id, Product.all,:id,:name %>
          </div>
    <% end %>
    <% form_for @order do |f| %>
        Items:
        <ul>
          <%= f.fields_for :product do |products_form|%>
              <li>
                <%= products_form.label :name %>
                <%=products_form.text_field :name %>
                <%= products_form.label :price %>
                <%= products_form.text_field :price %>
              </li>
          <%end %>
        </ul>
    <%end %>

<br><br>

    <!--<div class="field">-->
      <!--<p>Choose the items for your order:</p>-->
      <!--<%= form.fields_for :products do |item|%>-->
          <!--<p>-->
            <!--<%= item.collection_select :product_id, Product.all,:id,:name %>-->
          <!--</p>-->
      <!--<% end %>-->
    <!--</div>-->

    <div class="actions">
      <%= form.submit %>
    </div>


<style>
  a:visited {
    color: white;
  }
</style>


<% end %>